# Hextris 微信小游戏

这是一个将经典HTML5游戏Hextris重写为微信小游戏格式的项目。

## 游戏说明

Hextris是一个基于六边形的俄罗斯方块类游戏。玩家需要控制中心六边形的旋转，让从六个方向落下的彩色方块正确堆叠，避免方块到达中心。

## 游戏特性

- **六边形旋转控制**：通过触摸屏幕左右两侧来旋转六边形
- **彩色方块**：6种不同颜色的方块从六个方向落下
- **物理碰撞**：方块会相互堆叠，形成稳定的结构
- **分数系统**：根据游戏时间计算分数
- **最高分记录**：自动保存和显示最高分

## 操作方式

### 触摸控制
- **左半屏**：逆时针旋转六边形
- **右半屏**：顺时针旋转六边形
- **点击菜单**：开始新游戏

### 键盘控制（调试模式）
- **A/左箭头**：逆时针旋转
- **D/右箭头**：顺时针旋转
- **S/下箭头**：加速方块下落
- **空格键**：暂停/继续游戏

## 文件结构

```
js/
├── hextris/
│   ├── settings.js      # 游戏设置和常量
│   ├── Block.js         # 方块类
│   ├── Hex.js           # 六边形类
│   └── game.js          # 游戏主逻辑
├── main.js              # 游戏入口
├── databus.js           # 数据管理
├── render.js            # Canvas初始化
└── base/
    └── pool.js          # 对象池
```

## 核心类说明

### HextrisGame
游戏主类，负责：
- 游戏状态管理
- 输入处理
- 方块生成
- 碰撞检测
- 渲染控制

### Hex
中心六边形类，负责：
- 六边形绘制
- 旋转控制
- 方块吸附
- 震动效果

### Block
方块类，负责：
- 方块绘制
- 物理运动
- 角度计算
- 透明度动画

## 游戏状态

- **MENU (0)**：游戏菜单
- **PLAYING (1)**：游戏进行中
- **PAUSED (2)**：游戏暂停
- **GAME_OVER (-1)**：游戏结束

## 技术特点

1. **模块化设计**：使用ES6模块化组织代码
2. **面向对象**：清晰的类结构设计
3. **微信API集成**：使用微信小游戏API处理输入和存储
4. **性能优化**：对象池复用，减少内存分配
5. **响应式设计**：适配不同屏幕尺寸

## 运行方式

1. 在微信开发者工具中打开项目
2. 选择"小游戏"项目类型
3. 点击预览或真机调试
4. 开始游戏

## 自定义设置

可以在 `js/hextris/settings.js` 中调整游戏参数：

- `blockGenerationInterval`：方块生成间隔
- `colors`：方块颜色配置
- `hexWidth`：六边形大小
- `blockHeight`：方块高度
- `speedModifier`：游戏速度

## 扩展功能

可以进一步添加的功能：
- 音效和背景音乐
- 粒子特效
- 连击系统
- 特殊方块
- 多人对战
- 排行榜系统 